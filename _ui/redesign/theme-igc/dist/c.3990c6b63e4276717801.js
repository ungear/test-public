(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"1lE9":function(t,e,n){"use strict";n("FZtP");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=Backbone.View.extend({initialize:function(t){this.type=t.type,this.autoHide=t.autoHide,this.delay=t.delay,this.callback=t.callback,this.showClose=t.showClose,this.notificationClassNames=t.notificationClassNames,this.styles=t.styles,this.styles&&this.$el.css(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.styles)),this.listenTo(this.model,"change:content",this.render)},events:{"click .j-close":"close"},render:function(){this.$el.empty(),this.notificationClassNames&&!this.$el.hasClass(this.notificationClassNames)&&this.$el.addClass(this.notificationClassNames),this.$el.toggleClass("hidden",!this.model.get("content"));var t=this.getBlockClasses(),e=this.getContent(t);return this.$el.append(e),this.autoHide&&this.removeNotification(this.delay,this.callback),this},getBlockClasses:function(){var t="notification j-notification";return this.model.get("type")&&(t+=" notification-".concat(this.model.get("type"))),this.showClose&&(t+=" notification-close"),t},getContent:function(t){var e='<div class="'.concat(t,'">').concat(this.model.get("content"));return this.showClose&&(e+='<span class="notification__close_icon j-close">âœ•</span>'),e+="</div>"},removeNotification:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TPS.configurationManager.MESSAGE_FADEOUT_TIMEOUT,n=arguments.length>1?arguments[1]:void 0;setTimeout((function(){t.$el.fadeOut("slow",(function(){this.remove()})),"function"==typeof n&&n()}),e)},close:function(){this.$el.remove()}});e.a=s},"6djh":function(t,e,n){"use strict";n("rB9j"),n("TWNs"),function(t){t.fn.serializeJson=function(){var e={},n=this.serializeArray();return t.each(n,(function(){new RegExp("^_","i").test(this.name)||(e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||"")})),e}}(jQuery)},JiZb:function(t,e,n){"use strict";var i=n("0GbY"),o=n("m/L8"),s=n("tiKp"),c=n("g6v/"),r=s("species");t.exports=function(t){var e=i(t),n=o.f;c&&e&&!e[r]&&n(e,r,{configurable:!0,get:function(){return this}})}},KINe:function(t,e,n){"use strict";function i(){$(".j-full_nav a[href='".concat(window.location.pathname,"']")).addClass("my_account_navigation__link-active")}n.d(e,"a",(function(){return i}))},ROdP:function(t,e,n){var i=n("hh1v"),o=n("xrYK"),s=n("tiKp")("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==o(t))}},TWNs:function(t,e,n){var i=n("g6v/"),o=n("2oRo"),s=n("lMq5"),c=n("cVYH"),r=n("m/L8").f,a=n("JBy8").f,l=n("ROdP"),u=n("rW0t"),f=n("n3/R"),h=n("busE"),g=n("0Dky"),p=n("afO8").set,d=n("JiZb"),b=n("tiKp")("match"),v=o.RegExp,m=v.prototype,y=/a/g,O=/a/g,_=new v(y)!==y,k=f.UNSUPPORTED_Y;if(i&&s("RegExp",!_||k||g((function(){return O[b]=!1,v(y)!=y||v(O)==O||"/a/i"!=v(y,"i")})))){for(var j=function(t,e){var n,i=this instanceof j,o=l(t),s=void 0===e;if(!i&&o&&t.constructor===j&&s)return t;_?o&&!s&&(t=t.source):t instanceof j&&(s&&(e=u.call(t)),t=t.source),k&&(n=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var r=c(_?new v(t,e):v(t,e),i?this:m,j);return k&&n&&p(r,{sticky:n}),r},w=function(t){t in j||r(j,t,{configurable:!0,get:function(){return v[t]},set:function(e){v[t]=e}})},P=a(v),C=0;P.length>C;)w(P[C++]);m.constructor=j,j.prototype=m,h(o,"RegExp",j)}d("RegExp")},cVYH:function(t,e,n){var i=n("hh1v"),o=n("0rvr");t.exports=function(t,e,n){var s,c;return o&&"function"==typeof(s=e.constructor)&&s!==n&&i(c=s.prototype)&&c!==n.prototype&&o(t,c),t}},lVi2:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return h}));var i=n("KINe"),o=(n("FZtP"),n("Xapy")),s=n("wPZ8"),c=n("vIGv"),r=n("hsyc");function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=Backbone.View.extend({el:".j-marketing_form",initialize:function(){this.$(".j-checkbox").trigger("change"),this.toggleUnloadConfirmation(!1)},events:{"click .j-marketing_submit":"handleFormSubmit","click .j-info":"handleInfoClick","change .j-checkbox":"handleCheckboxChange"},toggleUnloadConfirmation:function(t){t?r.f.bind("beforeunload",this.handlePageLeave):r.f.unbind("beforeunload",this.handlePageLeave)},handlePageLeave:function(){return TPS.messages["redesign.account.marketingnotifications.onleave"]},handleFormSubmit:function(t){var e=this;t.preventDefault();var n=this.$el.serializeJson();$.csrfAjax(o.c.ACCOUNT_UPDATE_MARKETING_PREFERENCES,n).done((function(n){if(!n.error){var i=e.$el.closest(".j-marketing_form"),o=Object(c.a)(i,$(t.target),115,145)+"px";e.$el.append(new s.a(l(l({model:new Backbone.Model({type:"fully_success",content:TPS.messages["redesign.myAccount.notification.successMessage"]})},c.b),{},{styles:TPS.utils.isMatchesMobile()?{top:o}:null})).render().el),e.toggleUnloadConfirmation(!1)}}))},handleCheckboxChange:function(t){t.target.checked?$(t.target).closest(".marketing_notifications__pseudocheckbox").addClass("marketing_notifications__pseudocheckbox--checked"):$(t.target).closest(".marketing_notifications__pseudocheckbox").removeClass("marketing_notifications__pseudocheckbox--checked"),this.toggleUnloadConfirmation(!0)},handleInfoClick:function(t){$(t.target).closest(".marketing_notifications__container").find(".marketing_notifications__description").toggle(),$(t.currentTarget).toggleClass("marketing_notifications__question-opened")}});n("6djh");function h(){i.a.call(this),(new f).render()}},vIGv:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var i=n("hsyc"),o=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:85,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:115;if(!(t&&t.length&&e&&e.length))return 0;var s=e.offset().top-n;return e.offset().top-i.b.scrollTop()<n?s-t.offset().top+e.outerHeight()+o:s-t.offset().top},s={notificationClassNames:"notification_wrapper-absolute j-success-notification",autoHide:!0,delay:TPS.configurationManager.MESSAGE_FADEOUT_TIMEOUT,styles:TPS.utils.isMatchesMobile()?{top:"53px"}:null}},wPZ8:function(t,e,n){"use strict";var i=n("1lE9");e.a=i.a.extend({getContent:function(t){return'<div class="'.concat(t,'">\n            <p class="notification__text">').concat(this.model.get("content"),'<span class="notification__tick_icon"></span></p>\n        </div>')}})}}]);