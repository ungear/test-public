(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{v6kM:function(t,i,e){"use strict";e.r(i),e.d(i,"default",(function(){return a}));e("E9XD"),e("q7uQ"),e("vxnP");var n=Backbone.View.extend({className:"content_page_nav__item",tagName:"li",template:_.template('\n        {{ if (header) { }}\n            <div class="content_page_nav__item_heading j-nav_heading">{{=header.innerHTML}}</div>\n        {{ } }}\n        {{ if (items.length) { }}\n            <ul class="content_page_nav__item_list">\n                {{ for (let i = 0; i < items.length; i++) { }}\n                    <li data-index="{{=i}}" class="content_page_nav__item_subheading j-nav_subheading">{{=items[i].heading.innerHTML}}</li>\n                {{ } }}\n            </ul>\n        {{ } }}\n    '),events:{"click .j-nav_heading, .j-nav_subheading":"scrollToSection"},scrollToSection:function(t){var i=this;Backbone.trigger("close-accordion"),setTimeout((function(){var e;if("li"===t.target.localName){var n=t.target.dataset.index;e=i.model.get("items")[n].offsetTop()}else e=i.model.get("offsetTop")();TPS.scroller.scrollTo(e-120)}),TPS.utils.isMatchesScreen(992)?400:0)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}}),o=e("hsyc"),s=e("WQFK"),c=Backbone.View.extend({template:'\n        <div class="j-content_page_nav_accordion content_page_nav__header">Sections</div>\n        <nav class="j-content_page_nav content_page_nav">\n            <ul class="j-nav_list content_page_nav__list"></ul>\n        </nav>\n    ',initialize:function(){this.$el.append(this.template),this.$navList=this.$(".j-nav_list"),this.navigation=new Backbone.Collection(this.getNavigation()),this.render(),this.onOutsideClick=this.onOutsideClick.bind(this),this.$el.length&&(this.isAccordion=!1,window.addEventListener("resize",this.checkResolution.bind(this)),this.initStickyNav(),this.checkResolution()),Backbone.on("close-accordion",this.closeAccordion.bind(this)),this.$el.click((function(t){return t.stopPropagation()}))},getNavigation:function(){return this.$el.next().find("h2, h3").toArray().reduce((function(t,i,e){var n=$(i)[0];if("h2"===n.localName){var o={header:n,offsetTop:function(){return $(n).offset().top},items:[]};t.push(o)}if("h3"===n.localName){var s={heading:n,offsetTop:function(){return $(n).offset().top}};if(0===e){var c={header:null,offsetTop:null,items:[s]};t.push(c)}else t[t.length-1].items.push(s)}return t}),[])},onOutsideClick:function(){this.closeAccordion()},initAccordion:function(){var t=this,i=this.$el.accordion({active:!1,collapsible:!0,heightStyle:"content",header:".j-content_page_nav_accordion",icons:{header:"icon_arrow-right",activeHeader:"icon_arrow-down"},beforeActivate:function(i,e){e.oldHeader.length&&parseInt(t.$el.next().css("margin-top"),10)>=t.$el.height()&&t.$el.next().animate({marginTop:"60px"},400)}});this.isAccordion=!!i.length},closeAccordion:function(){this.isAccordion&&this.$el.accordion("option","active",!1)},destroyAccordion:function(){this.$el.accordion("destroy"),this.isAccordion=!1},checkResolution:function(){TPS.utils.isMatchesScreen(992)?(!this.isAccordion&&this.initAccordion(),this.resetStickyNavDesktop(),o.a.on("click",this.onOutsideClick)):(this.isAccordion&&this.destroyAccordion(),this.resetStickyNavMobile(),o.a.off("click",this.onOutsideClick))},initStickyNav:function(){this.stickyNavFunction(),Backbone.on("change:headerVisibility",this.stickyNavFunction.bind(this,!0)),window.addEventListener("scroll",this.stickyNavFunction.bind(this,!1),s.a)},resetStickyNavDesktop:function(){this.$navList.css({position:"relative",height:"auto",top:"inherit"})},resetStickyNavMobile:function(){this.$el.css({position:"static",top:"inherit"})},stickyNavFunction:function(t){TPS.utils.isMatchesScreen(992)?this.getMobileOffset():this.getDesktopOffset(t)},getMobileOffset:function(){var t,i,e,n=this,s=Object(o.g)();o.f.scrollTop()+s>this.$el.closest(".j-nav_container").offset().top?(t=s,i="fixed",e=60===parseInt(this.$el.next().css("margin-top"),10)?"60px":"".concat(this.$el.height(),"px")):(i="static",e=0),requestAnimationFrame((function(){n.$el.css({position:i,top:t}),n.$el.next().css({"margin-top":e})}))},getDesktopOffset:function(t){var i,e=this,n=Object(o.g)(),s=document.getElementsByClassName("j-content_page_aside")[0].getBoundingClientRect(),c=o.c[0].getBoundingClientRect().bottom;i=n>0?s.top>c?s.top:o.c.height():s.top>0?s.top:0;var a=s.bottom<=o.f.height()?o.f.height()-s.bottom:0;requestAnimationFrame((function(){e.$navList.css({transition:t?"top 0.2s ease-in-out":"",position:"fixed",top:i+10,bottom:a+10}),t&&setTimeout((function(){return e.$navList.css("transition","")}),200)}))},render:function(){var t=this;this.navigation.each((function(i){var e=new n({model:i}).render();t.$navList.append(e.el)})),this.$navList.length&&this.$el.removeClass("content_page__aside-hidden")}});function a(){new c({el:$(".j-content_page_aside")})}}}]);