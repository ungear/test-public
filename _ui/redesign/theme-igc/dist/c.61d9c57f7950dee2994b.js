(window.webpackJsonp=window.webpackJsonp||[]).push([[118],{MjON:function(t,e,o){"use strict";o("vxnP");var i=o("+njy"),n=o.n(i),s=o("qmvR"),r=o("hsyc");n.a.disable();var l=Backbone.View.extend({baseTemplate:_.template('\n        <div class="rollover j-rollover {{=rolloverClass}}">\n            <div class="rollover_head">\n                {{ if (showBack) { }}\n                <div class="rollover_head__back j-rollover-back"></div>\n                {{ } }}\n                {{ if (titleLink) { }}\n                <a class="rollover_head__title_link" href="{{=url}}">\n                {{ } }}\n                <h4 class="rollover_head__title">{{=title}}</h4>\n                {{ if (titleLink) { }}\n                </a>\n                {{ } }}\n                <div class="rollover_head__close j-rollover-close"></div>\n            </div>\n            <div class="rollover_body"></div>\n        </div>\n    '),events:{"click .j-rollover-close":"backThroughTime","click .j-rollover-back":"goToPreviousRollover","click .j-rollover-link":"goNext","click a":"navigate",mouseenter:"clearAutoClose"},defaults:{destroyOnClose:!0,titleLink:!1,show:!0,showBack:!1},preinitialize:function(t){this.events=_.extend(this.events,l.prototype.events)},initialize:function(t){return this.setElement($('<div class="rollovers j-rollovers"></div>').appendTo(r.a)),this.onOutsideClick=this.onOutsideClick.bind(this),this.onHistoryPop=this.onHistoryPop.bind(this),this.close=this.close.bind(this),setTimeout(function(){$(".j-rollovers.open").on("click.rolloverOutside keydown.rolloverOutside",this.onOutsideClick)}.bind(this),0),this.settings=_.extend({},this.defaults,t),this.settings.content&&(this.settings.title="Catalog",this.settings.contentParent=this.settings.content.parent(),this.settings.content.appendTo(this.$el)),this.rolloverContainer=[],!this.$el.html()&&this.template&&(this.template=_.template(this.template),this.render()),this.settings.show&&this.open(),"number"==typeof this.settings.autoCloseTimeout&&this.settings.autoCloseTimeout>0&&this.setupAutoClose(this.settings.autoCloseTimeout),this},setTitle:function(t){return this.$(".rollover_head__title").text(t),this},setHead:function(t){this.$(".rollover_head").html(t)},setBody:function(t){return this.$(".rollover_body").html(t),this},openRollover:function(t){t.addClass("open")},closeRollover:function(t){t.removeClass("open").css("height","")},open:function(){var t=this;this.trigger("open"),this.$el.addClass("open"),r.a.addClass("no-scroll");var e=this.$el.children(".j-rollover");return requestAnimationFrame((function(){t.$el.addClass("transition"),t.openRollover(e),s.c&&n.a.enable()})),this.setHistory(),this},close:function(){return this.trigger("close"),this.$el.removeClass("transition"),r.a.removeClass("no-scroll"),this.closeRollover(this.$el.children(".j-rollover")),setTimeout(function(){for(var t=this.rolloverContainer.pop();void 0!==t;)this.$el.children(".j-rollover").last().removeClass("open").appendTo(t),t=this.rolloverContainer.pop();this.$el.removeClass("open"),n.a.disable(),this.settings.destroyOnClose&&this.destroy()}.bind(this),300),$(".j-rollovers.open").off(".rolloverOutside"),window.removeEventListener("popstate",this.onHistoryPop),this},openNextRollover:function(t,e){var o=this;this.closeRollover(t),this.rolloverContainer.push(e.parent()),e.appendTo(t.parent()),requestAnimationFrame((function(){return o.openRollover(e)}))},openPreviousRollover:function(t,e){t||e||(e=(t=this.$el.children(".open")).prev());var o=this.rolloverContainer.pop();this.closeRollover(t),setTimeout((function(){return t.appendTo(o)}),300),this.openRollover(e)},goNext:function(t){var e=$(t.currentTarget),o=e.closest(".j-rollover"),i=e.siblings(".j-rollover");t.preventDefault(),t.stopImmediatePropagation(),i.length?(window.history.pushState({component:"rollover",name:this.settings.title,index:this.rolloverContainer.length+2},""),this.openNextRollover(o,i)):this.navigate(t)},backThroughTime:function(){$("#fragrance-finder").length?this.close():window.history.go(-(this.rolloverContainer.length+1))},navigate:function(t){var e=$(t.currentTarget);t.preventDefault(),t.stopPropagation(),this.pendingNavigation=e.attr("href"),this.backThroughTime()},goToPreviousRollover:function(){window.history.go(-1)},setHistory:function(){var t=this,e={component:"rollover",name:this.settings.title,index:1};setTimeout((function(){if(window.history.state&&"rollover"===window.history.state.component){window.addEventListener("popstate",(function o(){window.history.state&&window.history.state.name!==t.settings.title?history.go(-1):(window.removeEventListener("popstate",o),window.history.pushState(e,""),window.addEventListener("popstate",t.onHistoryPop))})),history.go(-1)}else window.history.pushState(e,""),window.addEventListener("popstate",t.onHistoryPop)}))},destroy:function(){return this.trigger("destroy"),this.off("all"),this.settings.contentParent&&this.settings.content.appendTo(this.settings.contentParent),this.remove(),this},setupAutoClose:function(){var t=this;this.settings.closeTimeout=setTimeout((function(){t.close(),clearTimeout(t.settings.closeTimeout)}),this.settings.autoCloseTimeout)},clearAutoClose:function(){clearTimeout(this.settings.closeTimeout),this.settings.closeTimeout=0},isOpen:function(){return this.$(".j-rollovers.open").length>0},onOutsideClick:function(t){if("click"===t.type){if(t.originalEvent&&0===(t.originalEvent.path||t.originalEvent.composedPath&&t.originalEvent.composedPath()||[]).indexOf(this.el))return t.preventDefault(),this.backThroughTime()}else if("keydown"===t.type&&27===t.keyCode)return t.preventDefault(),this.backThroughTime();return!0},onHistoryPop:function(t){var e=t.state;if("rollover"===(null==e?void 0:e.component))e.name===this.settings.title?e.index===this.rolloverContainer.length&&this.openPreviousRollover():this.close();else if(this.pendingNavigation){var o=this.pendingNavigation;this.pendingNavigation=null,window.location.href=o}else this.close()},render:function(){var t=this.model.toJSON();return this.$el.append(this.baseTemplate(this.settings)),this.$(".rollover_body").html(this.template(t)),this}});e.a=l},iN1I:function(t,e,o){"use strict";o.r(e);o("4mDm"),o("3bBZ");var i=o("MjON"),n=o("Xapy"),s=i.a.extend({openRollover:function(t){i.a.prototype.openRollover.call(this,t),t.data("pending")?this.loadCategoryContent(t):(this.triggerCategoryLoadedEvent(t),t.data("brand")&&this.initBrandCategory(t.get(0)))},loadCategoryContent:function(t){var e=this,o=!1,i=t.find(".rollover_body"),s=setTimeout((function(){o||i.addClass("spinner")}),500);$.get(n.c.GET_NAVIGATION_CATEGORY,{componentPK:t.data("pending"),isMobile:!0}).done((function(n){clearTimeout(s),t.data("pending",""),i.html(n).removeClass("rollover_body-empty"),e.triggerCategoryLoadedEvent(t),t.data("brand")&&e.initBrandCategory(t.get(0)),o=!0})).always((function(){i.removeClass("spinner")}))},triggerCategoryLoadedEvent:function(t){t.data("triggered")||t.data("triggered",!0).trigger("mobileCategoryLoaded",t.data("category"))},initBrandCategory:function(t){o.e(13).then(o.bind(null,"bX4f")).then((function(e){var o=e.default;t&&!t.__az&&(t.__az=new o({el:".header_mobile__category_brands__navigation",scrollingContainer:".j-brands-list",items:".j-brands-list > ul"}))}))}});e.default=s}}]);