(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"1lE9":function(e,t,n){"use strict";n("FZtP");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=Backbone.View.extend({initialize:function(e){this.type=e.type,this.autoHide=e.autoHide,this.delay=e.delay,this.callback=e.callback,this.showClose=e.showClose,this.notificationClassNames=e.notificationClassNames,this.styles=e.styles,this.styles&&this.$el.css(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.styles)),this.listenTo(this.model,"change:content",this.render)},events:{"click .j-close":"close"},render:function(){this.$el.empty(),this.notificationClassNames&&!this.$el.hasClass(this.notificationClassNames)&&this.$el.addClass(this.notificationClassNames),this.$el.toggleClass("hidden",!this.model.get("content"));var e=this.getBlockClasses(),t=this.getContent(e);return this.$el.append(t),this.autoHide&&this.removeNotification(this.delay,this.callback),this},getBlockClasses:function(){var e="notification j-notification";return this.model.get("type")&&(e+=" notification-".concat(this.model.get("type"))),this.showClose&&(e+=" notification-close"),e},getContent:function(e){var t='<div class="'.concat(e,'">').concat(this.model.get("content"));return this.showClose&&(t+='<span class="notification__close_icon j-close">âœ•</span>'),t+="</div>"},removeNotification:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TPS.configurationManager.MESSAGE_FADEOUT_TIMEOUT,n=arguments.length>1?arguments[1]:void 0;setTimeout((function(){e.$el.fadeOut("slow",(function(){this.remove()})),"function"==typeof n&&n()}),t)},close:function(){this.$el.remove()}});t.a=o},"3kN4":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return y}));var i=n("KINe"),a=(n("vxnP"),n("FZtP"),Backbone.Model.extend({defaults:{active:!1,cardNumberToAdd:null,captchaLoaded:!1,captchaResponse:null}})),o=n("WYJf"),r=n("dDT3"),s=n("s35c"),c=r.a.extend({validate:function(e){if(!this.validateRequired(e))return this.error.required;var t=e.value;return s.a.validate(t)?void 0:TPS.messages["redesign.account.giftCards.form.error"]}}),l=n("uMZl"),d=n("Xapy"),u=l.a.extend({initialize:function(e){l.a.prototype.initialize.apply(this,arguments),this.parent=e.parent,this.listenTo(this.parent.model,"change:active change:captchaResponse change:cardNumberToAdd",this.onDataChange)},onDataChange:function(e){var t=e.toJSON(),n=t.active,i=t.captchaResponse,a=t.cardNumberToAdd,o=s.a.validate(a),r=n&&!(!!i&&o);this.model.set({disabled:r})},onClick:function(){this.parent.model.get("active")?(this.model.set({loading:!0}),this.addCard()):(this.parent.model.set({active:!0}),this.model.set({disabled:!0}))},addCard:function(){var e=this;$.csrfAjax(d.c.ACCOUNT_ADD_GIFT_CARD,{eGiftCardCode:this.parent.model.get("cardNumberToAdd"),captchaResponse:this.parent.model.get("captchaResponse")}).done((function(e){e.errorCode?Backbone.trigger("gift-card-add-failure",e):Backbone.trigger("gift-card-add-success",e)})).catch((function(e){Backbone.trigger("gift-card-add-failure",e)})).always((function(){e.model.set({loading:!1})}))}}),f=n("fEAn"),h=n("wPZ8"),p=n("vIGv");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=Backbone.View.extend({template:_.template('\n        <div class="form_field form_field-hidden j-gift_card_number"></div>\n        <div class="form_field form_field-hidden j-card_form_captcha gift_cards_form__captcha"></div>\n        <AddEgiftCardBtn />\n    '),initialize:function(){this.captchaSitekey=TPS.pageData.eGiftCard.captchaSitekey,this.loadCaptchaScript(),this.listenTo(this.model,"change:captchaLoaded",this.lazyInitCaptcha),this.listenTo(this.model,"change:active",this.showForm),Backbone.on("gift-card-add-success",this.onGiftCardAddSuccess,this),Backbone.on("gift-card-add-failure",this.onGiftCardAddFailure,this)},model:new a,events:{"keyup .form_field__input":"updateModel"},onFieldUpdate:function(e){this.model.set("cardNumberToAdd",e.get("value"))},onGiftCardAddSuccess:function(){this.model.set(g(g({},this.model.defaults),{},{captchaLoaded:!0})),this.renderCardNumberField(),this.resetCaptcha(),$(".j-account_gift_cards").append(new h.a(g(g({model:new Backbone.Model({type:"fully_success",content:TPS.messages["redesign.account.giftCards.notification.successMessage"]})},p.b),{},{styles:{top:"400px"}})).render().el)},onGiftCardAddFailure:function(e){this.cardNumberField.model.validationError=e.message,this.cardNumberField.model.trigger("change"),this.resetCaptcha()},loadCaptchaScript:function(){var e=this;$.getScript("https://www.google.com/recaptcha/api.js?hl=en&onload=onReCaptchaLoadCallback&render=explicit"),Backbone.on("re-captcha-script-loaded",(function(){return e.model.set("captchaLoaded",!0)}))},lazyInitCaptcha:function(){var e=this,t=setInterval((function(){e.model.get("captchaLoaded")&&(clearInterval(t),e.initCaptcha())}),250)},initCaptcha:function(){var e=this,t=this.$(".j-card_form_captcha");this.model.set("captchaResponse",null),window.grecaptcha.render(t.get(-1),{sitekey:this.captchaSitekey,callback:function(t){e.model.set({captchaResponse:t})},"expired-callback":function(){e.model.set({captchaResponse:null}),e.resetCaptcha()}})},resetCaptcha:function(){setTimeout(window.grecaptcha.reset,200),this.model.set({captchaResponse:null})},showForm:function(){this.$(".j-gift_card_number").toggleClass("form_field-hidden"),this.$(".j-card_form_captcha").toggleClass("form_field-hidden")},renderCardNumberField:function(){this.cardNumberField=new o.a({el:this.$(".j-gift_card_number"),parent:this,model:new c({label:TPS.messages["redesign.account.giftCards.form.placeholder"],name:"card-number",required:!0})}).render(),this.listenTo(this.cardNumberField.model,"change:value",this.onFieldUpdate)},updateModel:function(e){this.cardNumberField.updateModel(e)},renderBtn:function(){return new u({el:this.$("AddEgiftCardBtn"),model:new f.a({classNames:["btn-green","gift_cards_form__button","Add_gift_voucher"],content:TPS.messages["redesign.account.giftCards.form.button"],disabled:!1,loading:!1}),parent:this}).render()},render:function(){var e=this.model.toJSON();this.$el.html(this.template(e)),this.renderCardNumberField(),this.renderBtn()}}),w=Backbone.View.extend({initialize:function(){Backbone.on("gift-card-add-success",this.onGiftCardAddSuccess,this)},getTotalAmount:function(){var e=this;$.get(d.c.ACCOUNT_GIFT_CARDS_TOTAL_VALUE).done((function(t){e.$(".j-gift_cards_total").html(" ".concat(TPS.config.currency.symbol).concat(t.toFixed(2)))})).fail(console.error)},getGiftCardTemplate:function(e){return'\n            <li class="gift_card">\n                <div class="gift_card__line">\n                    <p class="gift_card__line_title">'.concat(TPS.messages["redesign.account.giftCards.card.expired.title"],'</p>\n                    <p class="gift_card__line_value">').concat(TPS.messages["redesign.account.giftCards.card.expired.label"]," ").concat(TPS.config.currency.symbol).concat(new Date(e.expiryDate).toLocaleDateString(),'</p>\n                </div>\n                <div class="gift_card__line">\n                    <p class="gift_card__line_title">').concat(TPS.messages["redesign.account.giftCards.card.current.title"],'</p>\n                    <p class="gift_card__line_value">').concat(TPS.config.currency.symbol).concat(e.giftCardTransactionInfo.amount.toFixed(2),'</p>\n                </div>\n                <div class="gift_card__line">\n                    <p class="gift_card__line_title">').concat(TPS.messages["redesign.account.giftCards.card.original.title"],'</p>\n                    <p class="gift_card__line_value">').concat(TPS.config.currency.symbol).concat(e.originalAmount.toFixed(2),'</p>\n                </div>\n                <div class="gift_card__line">\n                    <p class="gift_card__line_title">').concat(TPS.messages["redesign.account.giftCards.card.code.title"],'</p>\n                    <p class="gift_card__line_value">').concat(e.cardNumber,"</p>\n                </div>\n            </li>\n        ")},onGiftCardAddSuccess:function(e){this.getTotalAmount(),this.$(".j-active_list").append(this.getGiftCardTemplate(e)),this.$el.removeClass("gift_cards-hidden")}});function y(){i.a.call(this),new b({el:$(".j-new_gift_card")}).render(),new w({el:$(".j-active_gift_cards")})}},KINe:function(e,t,n){"use strict";function i(){$(".j-full_nav a[href='".concat(window.location.pathname,"']")).addClass("my_account_navigation__link-active")}n.d(t,"a",(function(){return i}))},PhnR:function(e,t,n){"use strict";n("rB9j"),n("UxlC");var i=function(e){if(!e)return!1;var t=a(e),n=t.length,i=/^\d+$/gi.test(t);return"7"===t[0]?!!i&&10===n:!!i&&(9===n||10===n)},a=function(e){var t="+44"===e.substring(0,3),n="0044"===e.substring(0,4);return t?e=e.substring(3,e.length):n&&(e=e.substring(4,e.length)),"0"===(e=e.replace(/[ '".,\-()]/gi,"")).substring(0,1)&&(e=e.substring(1,e.length)),e},o=n("6hlI");t.a=Backbone.Model.extend({defaults:{classNames:"",disabled:!1,error:null,id:"",isClean:!0,label:"",name:"",required:!1,type:"text",value:"",showError:!0},idAttribute:"name",parse:function(e){return"titleCode"===e.name||"title"===e.name?_.extend({},e,{options:this.convertSelectOptions(e.options,"name","code")}):"countryIso"===e.name?_.extend({},e,{options:this.convertSelectOptions(e.options,"name","isocode")}):e},convertSelectOptions:function(e,t,n){return e.map((function(e){return{name:e[t],value:e[n]}}))},validatePassword:function(e){if(e){var t="",n={contain:{number:!0,"uppercase letter":!0,"lowercase letter":!0},characters:!0};n.contain.number=Boolean(e.match(/\d/)),n.contain["uppercase letter"]=Boolean(e.match(/[A-Z]/)),n.contain["lowercase letter"]=Boolean(e.match(/[a-z]/)),n.characters=Boolean(e.match(/\S{8}/));var i=Object.keys(n.contain).filter((function(e){return!n.contain[e]})),a=i.length;return n.characters&&!a||(t+="Must ",a&&(t+="contain at least one ",t+=i.slice(0,a-1).join(", ").concat("".concat(a>1?" and ":"").concat(i[a-1]))),n.characters||(5===t.indexOf("contain")&&(t+=", and "),t+="be at least 8 characters")),t}},validate:function(e){var t=e.required,n=e.value,a=e.isClean,r=e.name,s=e.error,c=e.type,l=e.label,d=e.validFunc;if(!a){if(t&&0===n.length)switch(c){case"select":return"Please select your ".concat(l.toLowerCase());case"text":case"tel":case"password":case"email":return"Please enter your ".concat(l.toLowerCase());default:return""}switch(r){case"phoneNumber":case"mobile":var u=this.collection&&this.collection.findWhere({id:"countryIso"});if(u?"GB"===u.get("value"):"GB"===TPS.config.currentSite.countryIsoCode){if(!i(n))return TPS.messages["redesign.validation.phone.invalid"]}else if(n.length<2||n.length>14)return TPS.messages["redesign.validation.phone.invalid"];break;case"postCode":case"postcode":if(t&&(null==n||0===n.length))return"Please enter a postcode";if(n&&n.length>10)return"Please enter a valid postcode"}if("email"==c||r.includes("email")){if(s)return s.message?s.message:s||TPS.messages["personal.details.email.unique"];if(!Object(o.a)(n))return TPS.messages["redesign.validation.email.invalid"];if(0===n.length)return""}if("password"==c||r.includes("password"))return s||this.validatePassword(n);if(d&&(s=d.call(this,n)),s)return s}}})},WYJf:function(e,t,n){"use strict";n("vxnP"),n("TWNs"),n("rB9j"),n("UxlC");var i=n("qmvR"),a=n("jAxj"),o=n("g/jT"),r=Backbone.View.extend({className:"form_field",initialize:function(e){this.listenTo(this.model,"change",this.renderChanges),this.parent=e.parent,this.valueCommited=!1,this.timeout=null},getInputTemplate:function(e){return"select"===e.type?'<select id="'.concat(e.name,"\" class='form_field__select ").concat(e.value?"form_field__input-not_empty":"","' autofocus ").concat(e.disabled?"disabled":"",">").concat(this.buildOptionsList(e.options),'</select>\n                    <div class="form_field__action_icon icon_arrow-down').concat(e.noValidationIcon?" icon_arrow-down-right":"",'"></div>'):"checkbox"===e.type?"<input id='".concat(e.id,"' class='form_field__checkbox check' type='").concat(e.type,"' '").concat(e.value?"checked":"","'>"):"textarea"===e.type?'<textarea id="'.concat(e.name,'" class="form_field__textarea ').concat(e.value?"form_field__input-not_empty":"",'"  ').concat(e.disabled?"disabled":""," autofocus>").concat(e.value,"</textarea>"):"password"===e.type?'<div class="form_field__password_compliance_wrap j-password_compliance_wrap"></div> \n                    <input id="'.concat(e.name,"\" class='form_field__input ").concat(e.value?"form_field__input-not_empty":"","' type='").concat(e.type,"' ").concat(e.disabled?"disabled":""," autofocus value='").concat(e.value?e.value:"","'>\n                    ").concat(e.passShow?'<a tabindex="0" class="form_field__show_password j-show_password">Show password</a>':""):'<input\n                        id="'.concat(e.name,"\"\n                        class='form_field__input ").concat(e.value?"form_field__input-not_empty":"","'\n                        type='").concat(e.type,"'\n                        ").concat(e.disabled?"disabled":"","\n                        autofocus\n                        value='").concat(e.value?e.value:"","'\n                        ").concat(e.inputmode?"inputmode=".concat(e.inputmode):"","\n                    >")},getLabelTemplate:function(e){var t=TPS.messages["select.title"];if(void 0!==e.label){var n=void 0!==TPS.messages.optionalText?" ".concat(TPS.messages.optionalText):" (optional)";t="".concat(e.label).concat(e.required?"":n)}else void 0!==e.title?t=e.title:"countryIso"===e.name&&(t=TPS.messages["country.select.title"]);return"<label class='".concat("form_field__label","' for='").concat(e.id,"'>").concat(t,"</label>")},buildOptionsList:function(e){var t=this,n=e.map((function(e){return"<option\n                ".concat(e.value===t.model.get("value")?"selected":"","\n                value='").concat(e.value,"'\n                ").concat(t.model.get("hideContent")?"data-cs-mask":""," >").concat(e.name,"</option>")}));return n.unshift('<option class="form_field__invisible_option" value=""></option>'),n.join("\n")},template:function(e){var t=e.toJSON();return'\n                <div class="form_field__error_wrapper">\n                    <div class="form_field__error">'.concat(e.validationError,'</div>\n                </div>\n                <div class="form_field__wrapper form_field__wrapper-width form_field__wrapper-').concat(t.type,'">\n                    ').concat(this.getInputTemplate(t),"\n                    ").concat(this.getLabelTemplate(t),"\n                    ").concat("checkbox"===t.type||t.noValidationIcon?"":'<span class="form_field__icon form_field__validity_icon"></span>',"\n                    ").concat(t.tooltip?'<span class="j-info_icon form_field__info_icon"></span>':"","\n                </div>")},events:{"change .form_field__input":"onFieldChange","input .form_field__input":"onFieldInput","animationend .form_field__input":"handleInputAnimation","change .form_field__checkbox":"onFieldChange","input .form_field__checkbox":"onFieldInput","change .form_field__select":"onFieldChange","input .form_field__select":"onFieldInput","change .form_field__textarea":"onFieldChange","input .form_field__textarea":"onFieldInput","click .j-show_password":"togglePasswordVisibility","keydown .j-show_password":"togglePasswordVisibility"},timeout:null,render:function(){var e=this;return this.$el.html(this.template(this.model)),this.model.get("tooltip")&&Object(a.a)({target:this.$(".j-info_icon"),content:this.model.get("tooltip")}),i.d&&setTimeout((function(){e.$(".form_field__input:-webkit-autofill").each((function(e,t){$(t).addClass("form_field__input-not_empty")}))}),375),this},updateModel:function(e){this.valueCommited=!0;var t=this.model.get("type");this.model.set({isClean:!1,error:!1,value:"checkbox"===t?e.currentTarget.checked:Object(o.a)(e.currentTarget.value)}),this.model.get("checkoutLogin")||(this.model.isValid(),this.parent&&this.parent.model.trigger("field-updated",{currentField:this.model}),this.renderChanges())},onFieldChange:function(e){this.timeout&&clearTimeout(this.timeout),this.updateModel(e)},onFieldInput:function(e){var t=this;$(e.target).val((function(e,n){return t.filterValue(n)})),this.valueCommited&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){return t.updateModel(e)})))},renderChanges:function(){var e="select"===this.model.get("type")?this.$(".form_field__select"):"textarea"===this.model.get("type")?this.$(".form_field__textarea"):this.$(".form_field__input"),t=this.$(".form_field__error_wrapper");this.model.validationError?(this.$el.addClass("invalid"),t.addClass("form_field__error_wrapper-visible").find(".form_field__error").html(this.model.validationError),this.model.get("value")||this.model.get("showError")||this.removeErrorNotification(t)):(this.$el.removeClass("invalid"),this.model.get("checkoutLogin")||this.$(".form_field__validity_icon").addClass("form_field__validity_icon-visible"),this.removeErrorNotification(t)),this.model.get("value")?e.addClass("form_field__input-not_empty"):e.removeClass("form_field__input-not_empty"),e.val(this.model.get("value"))},removeErrorNotification:function(e){e.removeClass("form_field__error_wrapper-visible").find(".form_field__error").html("")},handleInputAnimation:function(e){var t=this.$(".form_field__input");e.originalEvent&&"onAutoFillStart"==e.originalEvent.animationName&&t.addClass("form_field__input-not_empty")},filterValue:function(e){if("checkbox"===this.model.get("type"))return e;var t=this.model.get("filter");return"function"==typeof t?t.call(this,e,this.model):t instanceof RegExp?e.replace(t,""):e},togglePasswordVisibility:function(e){var t=event.key||event.keyCode;if("keydown"!==event.type||"Enter"===t||13===t){e.preventDefault();var n=$(e.target).siblings("input");"password"==n.prop("type")?(n.prop("type","text"),$(e.target).text("Hide password")):(n.prop("type","password"),$(e.target).text("Show password"))}}});t.a=r},dDT3:function(e,t,n){"use strict";var i=n("PhnR");t.a=i.a.extend({error:{required:"The field is required!",wrongFormat:"The field has wrong format!"},validate:function(e){if(!this.validateRequired(e))return this.error.required},validateRequired:function(e){var t=e.required,n=e.value;return!(t&&!n)}})},fEAn:function(e,t,n){"use strict";t.a=Backbone.Model.extend({defaults:{classNames:[],content:"",disabled:!1,loading:!1}})},"g/jT":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("rB9j");var i=function(e,t,n){var i;for(e=n?Math.floor(e/700):e>>1,e+=Math.floor(e/t),i=0;e>455;i+=36)e=Math.floor(e/35);return Math.floor(i+36*e/(e+38))},a=function(e,t){var n,a,o,r,s,c,l,d,u,f,h,p,m,_,g=[],v=[],b=e.length;for(n=128,o=0,r=72,(s=e.lastIndexOf("-"))<0&&(s=0),c=0;c<s;++c){if(t&&(v[g.length]=e.charCodeAt(c)-65<26),e.charCodeAt(c)>=128)throw new RangeError("Illegal input >= 0x80");g.push(e.charCodeAt(c))}for(l=s>0?s+1:0;l<b;){for(d=o,u=1,f=36;;f+=36){if(l>=b)throw RangeError("punycode_bad_input(1)");if((h=(_=e.charCodeAt(l++))-48<10?_-22:_-65<26?_-65:_-97<26?_-97:36)>=36)throw RangeError("punycode_bad_input(2)");if(h>Math.floor((2147483647-o)/u))throw RangeError("punycode_overflow(1)");if(o+=h*u,h<(p=f<=r?1:f>=r+26?26:f-r))break;if(u>Math.floor(2147483647/(36-p)))throw RangeError("punycode_overflow(2)");u*=36-p}if(a=g.length+1,r=i(o-d,a,0===d),Math.floor(o/a)>2147483647-n)throw RangeError("punycode_overflow(3)");n+=Math.floor(o/a),o%=a,t&&v.splice(o,0,e.charCodeAt(l-1)-65<26),g.splice(o,0,n),o++}if(t)for(o=0,m=g.length;o<m;o++)v[o]&&(g[o]=String.fromCharCode(g[o]).toUpperCase().charCodeAt(0));return function(e){for(var t,n=[],i=e.length,a=0;a<i;){if(55296==(63488&(t=e[a++])))throw new RangeError("UTF-16(encode): Illegal UTF-16 value");t>65535&&(t-=65536,n.push(String.fromCharCode(t>>>10&1023|55296)),t=56320|1023&t),n.push(String.fromCharCode(t))}return n.join("")}(g)},o=function(e){for(var t=e.split("."),n=[],i=0;i<t.length;++i){var o=t[i];n.push(o.match(/^xn--/)?a(o.slice(4)):o)}return n.join(".")}},jAxj:function(e,t,n){"use strict";n("FZtP"),n("MdDL");var i=[];window.addEventListener("resize",(function(){i.length&&(i=i.filter((function(e){return document.body.contains(e[0])}))).forEach((function(e){var t=e.tooltip("option","hide");e.tooltip("option","hide",!1),e.tooltip("close"),e.tooltip("option","hide",t)}))}));t.a=function(e){var t=e.target,n=e.content;n&&(t.tooltip({collision:"flip",content:n,items:"span",position:{my:"center bottom-5",at:"center top"}}).on("click ",(function(e){if(window.matchMedia(TPS.config.mobileBreakpoint).matches||window.matchMedia(TPS.config.tableBreakpoint).matches){e.stopImmediatePropagation();var t=$(e.target);t.data("uiTooltipOpen")?(t.tooltip("open"),t.removeData("uiTooltipOpen")):(t.tooltip("close"),t.data("uiTooltipOpen",!0))}})),i.push(t))}},s35c:function(e,t,n){"use strict";n("TWNs"),n("rB9j");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o,r,s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[123456],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;i(this,e),this.binRangeArray=t,this.cardNumberLength=n}var t,n,o;return t=e,(n=[{key:"validate",value:function(e){if(!e)return!1;var t=this.binRangeArray[0].toString().length,n=this.binRangeArray.join("|");return new RegExp("^("+n+")[\\d]{"+(this.cardNumberLength-t)+"}$").test(e)}}])&&a(t.prototype,n),o&&a(t,o),e}();TPS&&TPS.pageData&&TPS.pageData.eGiftCard&&(o=[TPS.pageData.eGiftCard.binRange,TPS.pageData.eGiftCard.binRangePhysical],r=TPS.pageData.eGiftCard.giftCardCodeSize),t.a=new s(o,r)},uMZl:function(e,t,n){"use strict";n("vxnP");t.a=Backbone.View.extend({initialize:function(){this.template=_.template('<button class="btn {{=classNames}} {{ if (loading) { }} btn-spinner {{ } }}" {{ if (disabled) { }} disabled {{ } }}>{{=content}}</button>'),this.listenTo(this.model,"change",this.render)},events:{click:"onClick"},onClick:$.noop,render:function(){var e=this.$el,t=this.model.toJSON(),n=$.extend({},t,{classNames:t.classNames.join(" ")});return this.setElement(this.template(n)),e.replaceWith(this.el),this}})},vIGv:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var i=n("hsyc"),a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:85,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:115;if(!(e&&e.length&&t&&t.length))return 0;var o=t.offset().top-n;return t.offset().top-i.b.scrollTop()<n?o-e.offset().top+t.outerHeight()+a:o-e.offset().top},o={notificationClassNames:"notification_wrapper-absolute j-success-notification",autoHide:!0,delay:TPS.configurationManager.MESSAGE_FADEOUT_TIMEOUT,styles:TPS.utils.isMatchesMobile()?{top:"53px"}:null}},wPZ8:function(e,t,n){"use strict";var i=n("1lE9");t.a=i.a.extend({getContent:function(e){return'<div class="'.concat(e,'">\n            <p class="notification__text">').concat(this.model.get("content"),'<span class="notification__tick_icon"></span></p>\n        </div>')}})}}]);