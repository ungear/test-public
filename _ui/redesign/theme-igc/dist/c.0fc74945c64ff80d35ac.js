(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{"+off":function(t,o,n){"use strict";var e=Backbone.Model.extend({defaults:{title:""}});o.a=e},"/4Te":function(t,o,n){},"JU+T":function(t,o,n){"use strict";n("vxnP");var e=["open","close","change:title","change:content","change:spinner"],s=Backbone.View.extend({initialize:function(t){var o=this;this.settings=$.extend({},this.popUpSettings,t.popUpSettings),this.lightBox=new TPS.Lightbox2($(_.template(this.content)(this.model.toJSON())),this.settings),e.forEach((function(t){o.listenTo(o.lightBox,t,o.trigger.bind(o,t))})),this.lightBox.setTitle(this.model.get("title")),this.setElement(this.lightBox.$popup),this.model.on("change:title",(function(t,n){return o.lightBox.setTitle(n)}))},open:function(){this.lightBox.open()},close:function(){this.settings.destroyOnClose&&this.destroy(),this.lightBox.close()},addSpinner:function(){TPS.utils.addSpinner(this.$el)},removeSpinner:function(){TPS.utils.removeSpinner(this.$el)},destroy:$.noop});o.a=s},dMgy:function(t,o,n){"use strict";n.r(o);n("p532");var e=n("JU+T"),s=n("+off").a.extend({defaults:{title:TPS.messages["onestock.sorry.popup.title"],removeButtonText:TPS.messages["onestock.sorry.popup.buttons.remove.products"],ctaButtonText:TPS.messages["onestock.sorry.popup.buttons.checkout"]}}),i=(n("/4Te"),e.a.extend({initialize:function(t){this.model=new s({alertMessage:t.alertMessage,products:t.products,removeButtonText:t.buttons.remove.text,ctaButtonText:t.buttons.cta.text}),e.a.prototype.initialize.apply(this,arguments),this.buttons=t.buttons,"function"==typeof t.onSkip&&this.on("close",t.onSkip)},popUpSettings:{fullscreen:!1,classes:{popup:"onestock_sorry_popup"}},events:{"click .j-remove_product":"onRemoveButtonClick","click .j-cta":"onCtaButtonClick"},content:'\n        <p class="onestock_sorry_popup__text">{{=alertMessage}}</p>\n        <div>\n            <ul class="onestock_sorry_popup__products_list">\n                {{ products.forEach(x => { }}\n                    <li class="onestock_sorry_popup__product">\n                        <img src="{{=x.image.src}}" alt="{{=x.image.text}}" class="onestock_sorry_popup__product_image">\n                        <div class="onestock_sorry_popup__product_info">\n                            {{ if (x.engraving) { }}\n                                <div class="onestock_sorry_popup__product_info_name">\n                                    {{=TPS.messages[\'engraving.product.title\']}}\n                                </div>\n                            {{ } else if (x.giftWrap) { }}\n                                <div class="onestock_sorry_popup__product_info_name">\n                                    {{=x.product.escapeName}}\n                                </div>\n                            {{ } else { }}\n                                <div class="onestock_sorry_popup__product_info_brand">{{=x.product.brand}}</div>\n                                <div class="onestock_sorry_popup__product_info_name">{{=x.product.range}}</div>\n                                <div class="onestock_sorry_popup__product_info_type">{{=x.product.name}}</div>\n                            {{ } }}\n                        </div>\n                    </li>\n                {{ }) }}\n            </ul>\n        </div>\n        <div class="j-error notification notification-error" style="display: none"></div>\n        <div class="onestock_sorry_popup__buttons">\n            <button class=\'btn j-remove_product btn-black\'>{{=removeButtonText}}</button>\n            <button class=\'btn j-cta btn-green\'>{{=ctaButtonText}}</button>\n        </div>\n    ',onRemoveButtonClick:function(){var t=this,o=this.buttons.remove.onClick(this.model.get("products"));if("boolean"!=typeof o||o){if(o instanceof Promise){var n=this.$(".j-error");return this.addSpinner(),n.hide(),void o.then((function(){return t.closeAfterAction()})).catch((function(t){n.html(t).show()})).finally((function(){t.$(".j-remove_product").blur(),t.removeSpinner()}))}this.closeAfterAction()}},onCtaButtonClick:function(){var t=this.buttons.cta.onClick();("boolean"!=typeof t||t)&&this.closeAfterAction()},closeAfterAction:function(){this.off("close"),this.close()}}));o.default=i}}]);