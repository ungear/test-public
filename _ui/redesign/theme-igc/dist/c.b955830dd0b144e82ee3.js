(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{MjON:function(e,t,o){"use strict";o("vxnP");var i=o("+njy"),n=o.n(i),s=o("qmvR"),l=o("hsyc");n.a.disable();var r=Backbone.View.extend({baseTemplate:_.template('\n        <div class="rollover j-rollover {{=rolloverClass}}">\n            <div class="rollover_head">\n                {{ if (showBack) { }}\n                <div class="rollover_head__back j-rollover-back"></div>\n                {{ } }}\n                {{ if (titleLink) { }}\n                <a class="rollover_head__title_link" href="{{=url}}">\n                {{ } }}\n                <h4 class="rollover_head__title">{{=title}}</h4>\n                {{ if (titleLink) { }}\n                </a>\n                {{ } }}\n                <div class="rollover_head__close j-rollover-close"></div>\n            </div>\n            <div class="rollover_body"></div>\n        </div>\n    '),events:{"click .j-rollover-close":"backThroughTime","click .j-rollover-back":"goToPreviousRollover","click .j-rollover-link":"goNext","click a":"navigate",mouseenter:"clearAutoClose"},defaults:{destroyOnClose:!0,titleLink:!1,show:!0,showBack:!1},preinitialize:function(e){this.events=_.extend(this.events,r.prototype.events)},initialize:function(e){return this.setElement($('<div class="rollovers j-rollovers"></div>').appendTo(l.a)),this.onOutsideClick=this.onOutsideClick.bind(this),this.onHistoryPop=this.onHistoryPop.bind(this),this.close=this.close.bind(this),setTimeout(function(){$(".j-rollovers.open").on("click.rolloverOutside keydown.rolloverOutside",this.onOutsideClick)}.bind(this),0),this.settings=_.extend({},this.defaults,e),this.settings.content&&(this.settings.title="Catalog",this.settings.contentParent=this.settings.content.parent(),this.settings.content.appendTo(this.$el)),this.rolloverContainer=[],!this.$el.html()&&this.template&&(this.template=_.template(this.template),this.render()),this.settings.show&&this.open(),"number"==typeof this.settings.autoCloseTimeout&&this.settings.autoCloseTimeout>0&&this.setupAutoClose(this.settings.autoCloseTimeout),this},setTitle:function(e){return this.$(".rollover_head__title").text(e),this},setHead:function(e){this.$(".rollover_head").html(e)},setBody:function(e){return this.$(".rollover_body").html(e),this},openRollover:function(e){e.addClass("open")},closeRollover:function(e){e.removeClass("open").css("height","")},open:function(){var e=this;this.trigger("open"),this.$el.addClass("open"),l.a.addClass("no-scroll");var t=this.$el.children(".j-rollover");return requestAnimationFrame((function(){e.$el.addClass("transition"),e.openRollover(t),s.c&&n.a.enable()})),this.setHistory(),this},close:function(){return this.trigger("close"),this.$el.removeClass("transition"),l.a.removeClass("no-scroll"),this.closeRollover(this.$el.children(".j-rollover")),setTimeout(function(){for(var e=this.rolloverContainer.pop();void 0!==e;)this.$el.children(".j-rollover").last().removeClass("open").appendTo(e),e=this.rolloverContainer.pop();this.$el.removeClass("open"),n.a.disable(),this.settings.destroyOnClose&&this.destroy()}.bind(this),300),$(".j-rollovers.open").off(".rolloverOutside"),window.removeEventListener("popstate",this.onHistoryPop),this},openNextRollover:function(e,t){var o=this;this.closeRollover(e),this.rolloverContainer.push(t.parent()),t.appendTo(e.parent()),requestAnimationFrame((function(){return o.openRollover(t)}))},openPreviousRollover:function(e,t){e||t||(t=(e=this.$el.children(".open")).prev());var o=this.rolloverContainer.pop();this.closeRollover(e),setTimeout((function(){return e.appendTo(o)}),300),this.openRollover(t)},goNext:function(e){var t=$(e.currentTarget),o=t.closest(".j-rollover"),i=t.siblings(".j-rollover");e.preventDefault(),e.stopImmediatePropagation(),i.length?(window.history.pushState({component:"rollover",name:this.settings.title,index:this.rolloverContainer.length+2},""),this.openNextRollover(o,i)):this.navigate(e)},backThroughTime:function(){$("#fragrance-finder").length?this.close():window.history.go(-(this.rolloverContainer.length+1))},navigate:function(e){var t=$(e.currentTarget);e.preventDefault(),e.stopPropagation(),this.pendingNavigation=t.attr("href"),this.backThroughTime()},goToPreviousRollover:function(){window.history.go(-1)},setHistory:function(){var e=this,t={component:"rollover",name:this.settings.title,index:1};setTimeout((function(){if(window.history.state&&"rollover"===window.history.state.component){window.addEventListener("popstate",(function o(){window.history.state&&window.history.state.name!==e.settings.title?history.go(-1):(window.removeEventListener("popstate",o),window.history.pushState(t,""),window.addEventListener("popstate",e.onHistoryPop))})),history.go(-1)}else window.history.pushState(t,""),window.addEventListener("popstate",e.onHistoryPop)}))},destroy:function(){return this.trigger("destroy"),this.off("all"),this.settings.contentParent&&this.settings.content.appendTo(this.settings.contentParent),this.remove(),this},setupAutoClose:function(){var e=this;this.settings.closeTimeout=setTimeout((function(){e.close(),clearTimeout(e.settings.closeTimeout)}),this.settings.autoCloseTimeout)},clearAutoClose:function(){clearTimeout(this.settings.closeTimeout),this.settings.closeTimeout=0},isOpen:function(){return this.$(".j-rollovers.open").length>0},onOutsideClick:function(e){if("click"===e.type){if(e.originalEvent&&0===(e.originalEvent.path||e.originalEvent.composedPath&&e.originalEvent.composedPath()||[]).indexOf(this.el))return e.preventDefault(),this.backThroughTime()}else if("keydown"===e.type&&27===e.keyCode)return e.preventDefault(),this.backThroughTime();return!0},onHistoryPop:function(e){var t=e.state;if("rollover"===(null==t?void 0:t.component))t.name===this.settings.title?t.index===this.rolloverContainer.length&&this.openPreviousRollover():this.close();else if(this.pendingNavigation){var o=this.pendingNavigation;this.pendingNavigation=null,window.location.href=o}else this.close()},render:function(){var e=this.model.toJSON();return this.$el.append(this.baseTemplate(this.settings)),this.$(".rollover_body").html(this.template(e)),this}});t.a=r},WwIM:function(e,t,o){"use strict";t.a={events:{"click .j-logout":"logout"},logout:function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this.model.get("menu").logout.href,o=function(e){window.location.href=e};TPS.configurationManager.IS_SOCIAL_LOGIN_ENABLED&&window.FB?FB.getLoginStatus((function(e){"connected"===e.status?FB.logout(o(t)):o(t)})):o(t)}}},mIVE:function(e,t,o){"use strict";var i=o("Xapy"),n=o("l34Z"),s=Backbone.Model.extend({defaults:{logged:function(){return n.c.isLoggedIn()},menu:{logged:[{href:i.b.ACCOUNT,icon:"icon_user-light",class:"",title:TPS.messages["account.menu.details"]},{href:i.b.ACCOUNT_ORDERS,icon:"icon_bottle",class:"",title:TPS.messages["account.menu.orders"]},{href:i.b.ACCOUNT_WISHLIST,icon:"icon_heart",class:"",title:TPS.messages["account.menu.wishlist"]},{href:TPS.config.isRewardsEnabled?i.b.ACCOUNT_MY_REWARDS:i.b.ACCOUNT_REWARDS,icon:"icon_cup",class:"",title:TPS.messages["account.menu.rewards"]}],notLogged:[{href:i.b.REGISTER,class:"Account_Sign_In",title:TPS.messages["account.menu.signup"]},{href:i.b.LOGIN,class:"",title:TPS.messages["account.menu.login"]}],logout:{href:i.b.LOGOUT,icon:"",title:TPS.messages["account.menu.logout"]}}}});t.a=s},zTil:function(e,t,o){"use strict";o.r(t);var i=o("MjON"),n=o("WwIM"),s=o("mIVE"),l=o("l34Z"),r=i.a.extend({template:'\n        <ul class="Account_Lvl2 rollover_body__links header__rollover_account__options{{=logged() ? \'-logged\' : \'\'}}" role="listbox">\n            {{ const links = logged() ? menu.logged : menu.notLogged }}\n            {{ for (let i = 0; i < links.length; i++) { }}\n                <li>\n                    <a href="{{=links[i].href}}" class="{{=links[i].class}}" aria-label="{{=links[i].title}}">\n                        {{ if (links[i].icon) { }}<span class="{{=links[i].icon}}"></span>{{ } }}\n                        {{=links[i].title}}\n                    </a>\n                </li>\n            {{ } }}\n        </ul>\n    ',model:new s.a,initialize:function(e){i.a.prototype.initialize.call(this,_.extend(e,{rolloverClass:"header__rollover header__rollover_account",title:"My Account"})),Object(l.b)(this.updateHeader,this)},updateHeader:function(){var e=this.model.get("menu").logout;this.$(".rollover_head__title").replaceWith('\n            <div class="rollover_head__title rollover_head__title-logged">\n                <span>\n                    '.concat(TPS.messages["header.hello"]," <span data-cs-mask>").concat(l.c.get("firstName"),'</span>\n                </span>\n                <span>|</span>\n                <a class="j-logout" href="').concat(e.href,'">').concat(e.title,"</a>\n            </div>\n        "))}});_.extend(r.prototype,n.a),t.default=r}}]);