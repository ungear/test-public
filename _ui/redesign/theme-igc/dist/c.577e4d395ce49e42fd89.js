(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{"1Y5N":function(t,e,o){"use strict";o("vxnP");var i=o("hsyc"),n=Backbone.View.extend({baseTemplate:_.template('\n        <div class="dropdown j-dropdown {{=dropdownClass}}" role="tooltip" aria-hidden="true">\n            <div class="dropdown_head">\n                <h4 class="dropdown_head__title">{{=title}}</h4>\n                <div class="dropdown_head__close j-dropdown-close"></div>\n            </div>\n            <div class="dropdown_body"></div>\n            <div class="dropdown_footer"></div>\n        </div>\n    '),events:{"click .j-dropdown-close":"close","click .dropdown":"stopPropagation","touchstart .dropdown":"stopPropagation",mouseleave:"close",mouseenter:"clearAutoClose"},defaults:{destroyOnClose:!0,show:!0,autoCloseTimeout:0,closeTimeout:0,title:"dropdown"},preinitialize:function(t){var e;this.events=_.extend(this.events,n.prototype.events),this.useHistory=null!==(e=t.useHistory)&&void 0!==e?e:window.matchMedia(TPS.config.mobileBreakpoint).matches},initialize:function(t){var e=this;return this.settings=_.extend({},this.defaults,t),this.onOutsideClick=this.onOutsideClick.bind(this),this.onHistoryPop=this.onHistoryPop.bind(this),this.close=this.close.bind(this),setTimeout(function(){i.f.on("click.dropdownOutside keydown.dropdownOutside",this.onOutsideClick)}.bind(this),0),this.template&&(this.template=_.template(this.template),this.render()),"number"==typeof this.settings.autoCloseTimeout&&this.settings.autoCloseTimeout>0&&this.setupAutoClose(this.settings.autoCloseTimeout),this.settings.show&&requestAnimationFrame((function(){return e.show()})),this},setTitle:function(t){return this.element.find(".dropdown_head__title").html(t),this},setHead:function(t){return this.element.find(".dropdown_head").html(t),this},setBody:function(t){return this.element.find(".dropdown_body").html(t),this},setFooter:function(t){return this.element.find(".dropdown_footer").html(t),this},show:function(){var t=this;return this.trigger("open"),this.element.addClass("open").attr({"aria-hidden":!1}),requestAnimationFrame((function(){return t.element.addClass("transition")})),this.calculateBoundaries(),this.useHistory&&(window.history.pushState({component:"dropdown",name:this.settings.title},null),window.addEventListener("popstate",this.onHistoryPop)),this},close:function(){var t,e=this;return this.trigger("close"),this.clearAutoClose(),this.element.removeClass("transition").attr({"aria-hidden":!0}),i.f.off(".dropdownOutside"),window.removeEventListener("popstate",this.onHistoryPop),this.useHistory&&"dropdown"===(null===(t=window.history.state)||void 0===t?void 0:t.component)&&window.history.go(-1),setTimeout((function(){e.element.removeClass("open"),e.settings.destroyOnClose&&e.destroy()}),200),this},calculateBoundaries:function(){var t=i.f.width(),e=this.element.width(),o=this.$el.width(),n=this.element.offset(),s=this.$el.offset();if(t-n.left<Math.floor(e)){var l=t-e-10,a=s.left+o/2-e/2;a+e+10<t&&(l=a),this.element.offset({left:l})}},destroy:function(){return this.trigger("destroy"),this.undelegateEvents(),this.stopListening(),this.element.remove(),this},setupAutoClose:function(){var t=this;this.settings.closeTimeout=setTimeout((function(){t.close(),clearTimeout()}),this.settings.autoCloseTimeout)},clearAutoClose:function(){clearTimeout(this.settings.closeTimeout),this.settings.closeTimeout=0},isOpen:function(){return $(this.element).hasClass("open")},onOutsideClick:function(t){if("click"===t.type){if((t.originalEvent.path||t.originalEvent.composedPath&&t.originalEvent.composedPath()||[]).indexOf(this.el)>-1)return!0;if(this.isOpen())return t.preventDefault(),this.close()}else if("keydown"===t.type&&27===t.keyCode&&this.isOpen())return t.preventDefault(),this.close();return!0},onHistoryPop:function(){var t;"dropdown"!==(null===(t=window.history.state)||void 0===t?void 0:t.component)&&this.close()},stopPropagation:function(t){t.stopPropagation()},render:function(){var t=this.model.toJSON();return this.element=$(this.baseTemplate(this.settings)),this.$el.append(this.element),this.setBody(this.template(t)),this}});e.a=n},MFqc:function(t,e,o){"use strict";o.r(e);var i=o("PaP2"),n=o("WwIM"),s=o("mIVE"),l=i.a.extend({template:'\n        <ul class="dropdown_body__links header_dropdown_account__options{{=logged() ? \'-logged\' : \'\'}}" role="listbox">\n            {{ const links = logged() ? menu.logged : menu.notLogged }}\n            {{ for (let i = 0; i < links.length; i++) { }}\n                <li class="dropdown_body__link">\n                    <a href="{{=links[i].href}}" aria-label="{{=links[i].title}}">\n                        {{ if (links[i].icon) { }}<span class="{{=links[i].icon}}"></span>{{ } }}\n                        {{=links[i].title}}\n                    </a>\n                </li>\n            {{ } }}\n        </ul>\n    ',model:new s.a,initialize:function(t){if(i.a.prototype.initialize.call(this,_.extend(t,{dropdownClass:"header_dropdown header_dropdown_account",title:"My Account"})),this.model.get("logged")()){var e=this.model.get("menu").logout;this.setFooter('<a href="'.concat(e.href,'" class="j-logout">').concat(e.title,"</a>"))}}});_.extend(l.prototype,n.a),e.default=l},PaP2:function(t,e,o){"use strict";var i=o("1Y5N"),n=_.extend({},i.a.prototype.events,{"keydown a":"simulateClick"}),s=i.a.extend({preinitialize:function(){_.extend(this.events,n)},events:n,simulateClick:function(t){var e=t.key||t.keyCode;"Enter"!==e&&13!==e||$(t.target)[0].click()}});e.a=s},WwIM:function(t,e,o){"use strict";e.a={events:{"click .j-logout":"logout"},logout:function(t){t.preventDefault(),t.stopImmediatePropagation();var e=this.model.get("menu").logout.href,o=function(t){window.location.href=t};TPS.configurationManager.IS_SOCIAL_LOGIN_ENABLED&&window.FB?FB.getLoginStatus((function(t){"connected"===t.status?FB.logout(o(e)):o(e)})):o(e)}}},mIVE:function(t,e,o){"use strict";var i=o("Xapy"),n=o("l34Z"),s=Backbone.Model.extend({defaults:{logged:function(){return n.c.isLoggedIn()},menu:{logged:[{href:i.b.ACCOUNT,icon:"icon_user-light",class:"",title:TPS.messages["account.menu.details"]},{href:i.b.ACCOUNT_ORDERS,icon:"icon_bottle",class:"",title:TPS.messages["account.menu.orders"]},{href:i.b.ACCOUNT_WISHLIST,icon:"icon_heart",class:"",title:TPS.messages["account.menu.wishlist"]},{href:TPS.config.isRewardsEnabled?i.b.ACCOUNT_MY_REWARDS:i.b.ACCOUNT_REWARDS,icon:"icon_cup",class:"",title:TPS.messages["account.menu.rewards"]}],notLogged:[{href:i.b.REGISTER,class:"Account_Sign_In",title:TPS.messages["account.menu.signup"]},{href:i.b.LOGIN,class:"",title:TPS.messages["account.menu.login"]}],logout:{href:i.b.LOGOUT,icon:"",title:TPS.messages["account.menu.logout"]}}}});e.a=s}}]);