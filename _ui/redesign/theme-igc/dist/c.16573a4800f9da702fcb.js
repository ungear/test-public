(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"6TuL":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("JU+T"),r={title:"Sorry",text:"",textClass:"",showMainButton:!0,mainButtonText:"OK",mainButtonColor:"green",mainButtonClass:"",showSecondaryButton:!1,secondaryButtonText:"",secondaryButtonClass:""},a=["buttonClose","isTitleCentered","destroyOnClose","closeOnEscape","closeOnOverlay","isAutoclose","autocloseTimeout","fullscreen","overlay","showTitle","callback","classes"],o=n.a.extend({content:'\n        <p class="notification_popup__text {{=textClass}}">{{=text}}</p>\n        {{ if (showMainButton) { }}\n            <button class="notification_popup__main_btn btn-{{=mainButtonColor}} {{=mainButtonClass}} j-main_button">\n                {{=mainButtonText}}\n            </button>\n        {{ } }}\n        {{ if (showSecondaryButton) { }}\n            <button class="notification_popup__secondary_btn {{=secondaryButtonClass}} j-popup__close_btn">\n                {{=secondaryButtonText}}\n            </button>\n        {{ } }}\n    ',events:{"click .j-main_button":"success",keydown:"onKeyDown"},onKeyDown:function(e){"keydown"===e.type&&13!==e.keyCode||this.success()},success:function(){this.trigger("success"),this.close()},popUpSettings:{buttonClose:"j-secondary_button",isTitleCentered:!0,showTitle:!0,fullscreen:!1,classes:{popup:"notification_popup"}}});function s(e){var t={};"popUpSettings"in e?_.extend(t,e.popUpSettings):_.extend(t,_.pick(e,a));var i=new Backbone.Model(_.extend({},r,e)),n=new o({model:i,popUpSettings:t});return new Promise((function(e,t){n.open(),n.once("success",e),n.once("close",t)}))}},"JU+T":function(e,t,i){"use strict";i("vxnP");var n=["open","close","change:title","change:content","change:spinner"],r=Backbone.View.extend({initialize:function(e){var t=this;this.settings=$.extend({},this.popUpSettings,e.popUpSettings),this.lightBox=new TPS.Lightbox2($(_.template(this.content)(this.model.toJSON())),this.settings),n.forEach((function(e){t.listenTo(t.lightBox,e,t.trigger.bind(t,e))})),this.lightBox.setTitle(this.model.get("title")),this.setElement(this.lightBox.$popup),this.model.on("change:title",(function(e,i){return t.lightBox.setTitle(i)}))},open:function(){this.lightBox.open()},close:function(){this.settings.destroyOnClose&&this.destroy(),this.lightBox.close()},addSpinner:function(){TPS.utils.addSpinner(this.$el)},removeSpinner:function(){TPS.utils.removeSpinner(this.$el)},destroy:$.noop});t.a=r},PHNg:function(e,t,i){"use strict";i.r(t);i("rB9j"),i("UxlC"),i("FZtP"),i("4Brf"),i("4mDm"),i("3bBZ"),i("84dL"),i("MdDL");var n=i("Xapy"),r=i("8Qz1"),a=(i("SYor"),i("g2sj"));function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var c=Backbone.Model.extend({defaults:{selected:void 0,selectedVariant:void 0,variants:[],page:"pdp",edit:!1,entryNumber:void 0,limits:void 0,values:{},errors:{},timeslots:[],fields:["amount","recipientName","deliveryEmailAddress","confirmDeliveryEmailAddress","senderName","greetingMessage","deliveryTimeDay","deliveryTime"]},initialize:function(){this.on("change:values",this.onChangeValues,this),this.on("change:selected",this.onChangeSelected,this),this.on("change:selectedVariant",this.updateLimits,this),this.loadVariants()},init:function(e){e.page&&this.set("page",e.page),this.set("edit",Boolean(e.egift)),this.get("edit")?(this.set("selected",e.egift.egiftCardCode),this.fillValues(e.egift)):"pdp"===this.get("page")?this.set("selected",location.pathname.split("/").pop()):"cart"===this.get("page")&&this.set("selected",e.selected);var t=e.egift?e.egift.deliveryTime:"now";this.createDeliveryTimeSlots(t),this.setValues({deliveryTime:t},!0)},fillValues:function(e){this.set("entryNumber",e.entryNumber);var t={amount:e.amount,recipientName:e.recipientName,deliveryEmailAddress:e.deliveryEmailAddress,confirmDeliveryEmailAddress:e.deliveryEmailAddress,senderName:e.senderName};e.greetingMessage&&(t.greetingMessage=e.greetingMessage),this.setValues(t)},onChangeSelected:function(e,t){e.get("variants").length&&e.set("selectedVariant",e.get("variants").find((function(e){return e.code===t})))},onChangeValues:function(e,t){var i=e._previousAttributes.values;for(var n in t)if(t[n]!==i[n]){this.validateEgift(n);break}},loadVariants:function(){var e=this;return $.get(n.c.EGIFT_GET_ALL).done((function(t){e.set("variants",t),e.set("selectedVariant",t.find((function(t){return t.code===e.get("selected")})))}))},serialize:function(){var e=s(s({},this.get("values")),{},{productCode:this.get("selected")});return this.get("edit")&&(e.entryNumber=this.get("entryNumber")),e.amount=parseFloat(e.amount),"now"===e.deliveryTime&&(e.deliveryTime=Date.now()),e.deliveryTimeZone=(new Date).getTimezoneOffset(),delete e.deliveryTimeDay,e.CSRFToken=TPS.CSRFToken,e},validateEgift:function(e){var t,i={},n=this.attributes,r=n.values,a=n.errors;switch(e){default:case"deliveryTime":case"deliveryTimeDay":t="deliveryTimeDay",r.hasOwnProperty(t)&&(i[t]=this.validateDeliveryTime(r[t]));case"greetingMessage":t="greetingMessage",r.hasOwnProperty(t)&&(i[t]=this.validateGreetingMessage(r[t]));case"senderName":t="senderName",r.hasOwnProperty(t)&&(i[t]=this.validateSenderName(r[t]));case"deliveryEmailAddress":t="deliveryEmailAddress",r.hasOwnProperty(t)&&(i[t]=this.validateEmail(r[t]));case"confirmDeliveryEmailAddress":t="confirmDeliveryEmailAddress",r.hasOwnProperty(t)&&(i[t]=this.validateEmailConfirmation(r[t]));case"recipientName":t="recipientName",r.hasOwnProperty(t)&&(i[t]=this.validateRecipientName(r[t]));case"amount":t="amount",r.hasOwnProperty(t)&&(i[t]=this.validateAmount(r[t]))}this.set("errors",_.extend({},a,i))},isValid:function(){var e=this.get("errors");return!Object.values(e).find((function(e){return Boolean(e)}))&&e.hasOwnProperty("amount")&&e.hasOwnProperty("recipientName")&&e.hasOwnProperty("deliveryEmailAddress")&&e.hasOwnProperty("confirmDeliveryEmailAddress")},validateAmount:function(e){var t=Number(e),i=parseInt(this.getLimit("minAmount")),n=parseInt(this.getLimit("maxAmount")),r=!1;if(_.isNaN(t)&&(r=TPS.messages["egift.form.error.wrong.amount"]),t<i&&(r=TPS.messages["egift.form.error.min.amount"].replace("{0}",i)),n<t&&(r=TPS.messages["egift.form.error.max.amount"].replace("{0}",n)),r)return r},validateRecipientName:function(e){if(!e)return TPS.messages["egift.form.error.mandatory.recipient.name"]},validateEmail:function(e){var t=e.trim();return""===t?TPS.messages["egift.form.error.mandatory.email"]:TPS.validator.validateEmail(t)?void 0:TPS.messages["egift.form.error.email.wrong.format"]},validateEmailConfirmation:function(e){if(!e)return TPS.messages["egift.form.error.mandatory.confirm.email"];var t=e.trim();return t!==this.getValue("deliveryEmailAddress")?TPS.messages["egift.form.error.email.confirmation.invalid"]:TPS.validator.validateEmail(t)?void 0:TPS.messages["egift.form.error.email.wrong.format"]},validateSenderName:function(e){if(!e)return TPS.messages["egift.form.error.mandatory.sender.name"]},validateGreetingMessage:function(e){if(e.length>parseInt(this.getLimit("maxMessage")))return TPS.messages["egift.form.error.message.max.length.exceed"].replace("{0}",this.getLimit("maxMessage"))},validateDeliveryTime:function(e){if(!e||""===e)return TPS.messages["egift.form.error.date.empty"];e=this.convertDate(e);var t=new Date(e);if(!(t instanceof Date&&isFinite(t)))return TPS.messages["egift.form.error.date.wrong.format"];var i=new Date,n=parseInt(this.getLimit("maxMonths")),r=new Date(i);return r.setMonth(r.getMonth()+n),t<i&&!a.a.isSameDay(t,i)?TPS.messages["egift.form.error.date.in.past"]:r<t?TPS.messages["egift.form.error.exceed.expiration.date"].replace("{0}",n):void 0},getLimit:function(e){return this.get("limits")[e]},getValue:function(e){return this.get("values")[e]},updateLimits:function(e,t){this.set("limits",{minAmount:t.minAmount,maxAmount:t.maxAmount,step:t.amountStep,maxMessage:t.maxMessageLength,maxMonths:t.maxMonthsAllowed})},setValues:function(e){e.hasOwnProperty("deliveryTimeDay")?this.getValue("deliveryTimeDay")!==e.deliveryTimeDay&&(e.deliveryTime=""+this.convertDateToTime(e.deliveryTimeDay),this.createDeliveryTimeSlots(e.deliveryTime)):e.hasOwnProperty("deliveryTime")&&(e.deliveryTimeDay=this.convertTimeToDate(e.deliveryTime)),this.set("values",_.extend({},this.get("values"),e))},createDeliveryTimeSlots:function(e){var t=new Date,i=t.getHours(),n=[],r="now"===(e="now"===e?"now":new Date(+e))||a.a.isSameDay(t,e),o="now"!==e&&a.a.isPastDate(e),s="now"!==e&&a.a.isFutureDate(e);if(o)this.set("timeslots",n);else{if(r){n.push({value:"now",title:"Now"});var l=new Date;l.setMinutes(0),l.setSeconds(0),l.setMilliseconds(0);for(var c=i+1;c<24;c++)l.setHours(c),n.push({value:l.getTime(),title:"".concat(a.a.makePrettyDateValue(c),":00")})}else if(s)for(var u=new Date(e),m=0;m<24;m++)u.setHours(m),n.push({value:u.getTime(),title:"".concat(a.a.makePrettyDateValue(m),":00")});this.set("timeslots",n)}},convertTimeToDate:function(e){return"now"===e?a.a.makeHumanDate(new Date):a.a.makeHumanDate(new Date(+e))},convertDateToTime:function(e){var t=new Date(this.convertDate(e)),i=new Date;return"now"===this.getValue("deliveryTime")?t.setHours(i.getHours()):t.setHours(new Date(+this.getValue("deliveryTime")).getHours()),a.a.isSameDay(t,i)&&t<i?"now":t.valueOf()},convertDate:function(e){var t=e.split("/");if(3!==t.length)throw Error("Wrong date format!");return t[1]+"/"+t[0]+"/"+t[2]},getPreviewValues:function(){var e=this.get("values");return{amount:e.amount,senderName:e.senderName,recipientName:e.recipientName,greetingMessage:e.greetingMessage}}}),u=i("uOUT"),m=Backbone.View.extend({initialize:function(e){this.variant=e.egift,this.render(e.egift)},events:{"change .j-egift_card_radio-carousel":"onSelect"},onSelect:function(e){$(e.currentTarget).is(":checked")&&this.trigger("selected",this.variant)},render:function(e){var t=TPS.productImageUtils.getImageSource(e.images,"product"),i=e.brandName;return this.$el.html('\n                    <label class="egift_carousel__tile">\n                        <input type="radio" name="productCode"\n                               value="'.concat(e.code,'"\n                               data-url="').concat(e.url,'"\n                               class="egift_card_radio j-egift_card_radio-carousel"/>\n                        <img class="egift_carousel__image Product_Image lazyload" data-src="').concat(t,'"\n                                alt="').concat(i," ").concat(e.rangeName," ").concat(e.name,'"\n                                title="').concat(i," ").concat(e.rangeName," ").concat(e.name,'"/>\n                    </label>\n                    <div class="egift_carousel__title">').concat(e.rangeName,"</div>\n                ")),this}}),d=Backbone.View.extend({initialize:function(e){var t=this;this.$el.empty(),e.variants.forEach((function(e){var i=$('<div class="egift_carousel__item">');new m({el:i,egift:e}).on("selected",t.onSelect,t),t.$el.append(i)})),this.carousel=new u.a({model:new Backbone.Model,settings:{selector:".j-egift_carousel__list",nav:!0,dots:!1,center:!0,responsiveClass:!0,responsive:{0:{items:1,nav:!1},350:{items:2,center:!0,margin:145},450:{items:2,center:!0,margin:60},550:{items:2,center:!0,margin:40},700:{items:3,stagePadding:30},900:{stagePadding:60},1e3:{items:3,stagePadding:e.popup?0:20}}}}),this.carousel.on("initialized resized",(function(e){t.$el.parent().find(".egift_carousel__info").html(TPS.messages["redesign.egiftcard.carousel.info"].replace("{0}",e.page.size).replace("{1}",e.item.count))})),this.carousel.render()},onSelect:function(e){this.trigger("selected",e)}}),f=i("JU+T");function g(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?g(Object(i),!0).forEach((function(t){p(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var v=f.a.extend({model:new Backbone.Model({title:TPS.messages["egift.preview.title"]}),events:{"click .j-preview_popup__add_btn":"onSubmit"},popupSettings:{isTitleCentered:!0,destroyOnClose:!0,classes:{popup:"egift_preview_popup"}},initialize:function(e){this.model.set(h({},e)),this.content=$(".j-egift_preview_popup").html(),f.a.prototype.initialize.call(this,arguments),this.open()},onSubmit:function(e){this.close(),this.trigger("submit",e)},destroy:function(){this.undelegateEvents()}}),y=i("6TuL");function b(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function T(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function P(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?T(Object(i),!0).forEach((function(t){S(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):T(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function S(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var O=Backbone.View.extend({events:{"click .j-egift_checkout, .j-egift_another, .j-egift_save":"onCardFormSubmit","click .j-egift_preview":"onPreviewBtnClick","change #amount":"onPriceChanged","change #deliveryTime":"onTimeChanged","input textarea":"limitCharacters","change input, textarea":"onInputChange"},initialize:function(e){var t=this;this.cacheDomElements(),this.setUpModel(e),this.$("fieldset:not(.egift_carousel)").tooltip({classes:{"ui-tooltip":"egiftcard-tooltip"},position:{my:"left+15 center",at:"right center"}}),this.$datepicker.datepicker({minDate:0,maxDate:"+1M",dateFormat:"dd/mm/yy",showOn:"both",buttonImage:"/_ui/redesign/theme-igc/images/calendar.svg",buttonText:"",onSelect:function(e){return t.model.setValues({deliveryTimeDay:e})}}),r.h.onInitialize(this.showAlert,this),this.$("#confirmDeliveryEmailAddress").noCopyPasteInput()},showAlert:function(){Object(r.o)()||"pdp"!==this.model.get("page")||this.showMixedCardErrorPopUp()},createGallery:function(e,t){this.gallery=new d({el:".j-egift_carousel__list",variants:t,popup:"cart"===e.get("page")}),this.$(".egift_carousel").removeClass("spinner"),this.gallery.on("selected",this.changeVariant,this),this.$designSelect=this.$(".j-egift_card_radio-carousel"),this.checkDefaultDesign()},createAmountSelect:function(e){this.$amountSelection.html(function(e){for(var t="",i=e.minAmount;i<=e.maxAmount;i+=e.amountStep)t+='\n                    <input type="radio" name="amount"\n                           value="'.concat(i,'"\n                           class="egift_card_radio j-egift_card_radio-value"\n                           id="egift_form__card_value-').concat(i,'"/>\n                    <label for="egift_form__card_value-').concat(i,'" class="egift_form__card_value_btn pdp_btn-black">\n                        ').concat(TPS.config.currency.symbol).concat(i,"\n                    </label>\n                ");return t}(e)),this.$amountRadios=this.$(".j-egift_card_radio-value")},isValid:function(){this.$inputs.trigger("change");var e=this.model.isValid();return e||this.$inputs.filter((function(e,t){return $(t).parent().hasClass("invalid")})).get(0).scrollIntoView({behavior:"smooth",block:"center"}),e},changeVariant:function(e){this.model.set("selected",e.code)},renderVariant:function(e,t){this.$amountSelection.addClass("spinner"),this.$amountTopLabel.html(TPS.messages["redesign.egiftcard.form.note"].replace("{0}","".concat(TPS.config.currency.symbol).concat(t.minAmount)).replace("{1}","".concat(TPS.config.currency.symbol).concat(t.maxAmount))),this.$amountBottomLabel.html("(Max: ".concat(TPS.config.currency.symbol).concat(t.maxAmount,")")),this.createAmountSelect(t),this.$amountSelection.removeClass("spinner"),this.model.getValue("amount")&&this.$amount.trigger("change"),this.$message.prop("maxlength",t.maxMessageLength),this.$datepicker.datepicker("option",{maxDate:"+".concat(t.maxMonthsAllowed,"M")}),this.model.validateEgift()},setUpModel:function(e){this.model=new c,this.model.updateLimits("fun fact: this parameter is ignored, but still required",{minAmount:this.$el.data("min-amount"),maxAmount:this.$el.data("max-amount"),amountStep:this.$el.data("step-amount"),maxMonthsAllowed:this.$el.data("max-months"),maxMessageLength:this.$el.data("max-message")}),this.listenTo(this.model,"change:variants",this.createGallery),this.listenTo(this.model,"change:values",this.onValueChanged),this.listenTo(this.model,"change:errors",this.checkValidInputs),this.listenTo(this.model,"change:timeslots",this.fillTimeSlots),this.listenTo(this.model,"change:selectedVariant",this.renderVariant),this.model.init(e)},onInputChange:function(e){var t=$(e.currentTarget),i=t.val();this.setInputNotEmptyClass(t),this.model.setValues(S({},t.prop("name"),i))},onValueChanged:function(e,t){for(var i in t){var n=this.$inputs.filter("[name=".concat(i,"]"));n.val(t[i]),n.trigger("change")}},onCardFormSubmit:function(e){var t=this;if(window!==window.parent)return!1;if(e.preventDefault(),Object(r.o)()){if(!this.isValid())return!1;var i=this.model.serialize();(this.model.get("edit")?r.k:r.a)(i).then((function(){if("cart"===t.model.get("page"))t.trigger(t.model.get("edit")?"edit":"add");else if("checkout"===$(e.target).data("target"))window.location.href=n.b.CHECKOUT_PROCESS;else if("reload"===$(e.target).data("target")){var i=TPS.configurationManager.MINI_CART_OVERLAY_TIMING;setTimeout((function(){return location.reload()}),i<100?1e3*i:i)}})).catch((function(e){return t.showMixedCardErrorPopUp(e)}))}else this.showMixedCardErrorPopUp()},onPriceChanged:function(e){var t=$(e.target).val();this.findValueOption(t)},onTimeChanged:function(e){this.model.setValues({deliveryTime:$(e.currentTarget).val()})},limitCharacters:function(e){var t=this.model.getLimit("maxMessage"),i=$(e.currentTarget).val().length;this.$remainChars.html(t-i)},onPreviewBtnClick:function(e){e.preventDefault(),this.isValid()&&this.cardPreview()},cardPreview:function(){var e=this,t=this.$(".j-egift_card_radio-carousel").filter((function(){return $(this).is(":checked")})).data("url");$.get(TPS.utils.getInternationalUrl(t)+"/previewEGiftCard",this.model.getPreviewValues()).done((function(t){!t||t.error?e.cardError("Internal preview error - please, try again later."):e.renderPreviewPopup(P(P({},t),e.model.get("values")))}))},renderPreviewPopup:function(e){this.previewPopup=new v(e),this.previewPopup.on("submit",this.onCardFormSubmit,this)},showMixedCardErrorPopUp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:TPS.messages["egift.form.error.mixed.cart"];Object(y.a)({text:e,mainButtonText:TPS.messages["egift.form.error.mixed.cart.checkout"],classes:{popup:"notification_popup mixed_cart_error_pop_up"}}).then((function(){window.location.href=n.b.CHECKOUT_PROCESS}))},checkValidInputs:function(e,t){var i,n=b(e.get("fields"));try{for(n.s();!(i=n.n()).done;){var r=i.value,a=this.$("#".concat(r)),o=t[r];a.parents(".egift_form__wrapper").find(".egift_form__error").remove(),a.next(".form_field__validity_icon").remove(),a.next(".form_field__validity_icon").remove(),o?(a.parent().addClass("invalid"),a.is("#deliveryTimeDay")||a.after('<div class="form_field__validity_icon egift_form__validity_icon"></div>'),a.parents(".egift_form__wrapper").prepend('<div class="egift_form__error">'.concat(o,"</div>"))):(a.parent().removeClass("invalid"),!a.is("#amount, #deliveryTimeDay, #deliveryTime")&&a.val()&&a.after('<div class="form_field__validity_icon egift_form__validity_icon"></div>'))}}catch(e){n.e(e)}finally{n.f()}},checkDefaultDesign:function(){var e=this;this.$designSelect.filter((function(t,i){return $(i).val()===e.model.get("selected")})).prop("checked",!0),this.gallery.$el.trigger("to.owl.carousel",[this.model.get("variants").findIndex((function(t){return t.code===e.model.get("selected")}))])},setInputNotEmptyClass:function(e){e.val()&&!e.is("#greetingMessage")?e.addClass("form_field__input-not_empty"):e.val()&&e.is("#greetingMessage")?e.addClass("egift_form__input-not_empty"):e.removeClass("egift_form__input-not_empty")&&e.removeClass("form_field__input-not_empty")},findValueOption:function(e){this.$amountRadios.each((function(){this.checked=this.value===e}))},cardError:function(e){Object(y.a)({text:e,mainButtonText:"CLOSE",classes:{popup:"notification_popup error_popup"}})},cacheDomElements:function(){this.$deliveryTime=this.$("#deliveryTime"),this.$datepicker=this.$("#deliveryTimeDay"),this.$amount=this.$("#amount"),this.$amountSelection=this.$(".j-egift_amount_select"),this.$amountRadios=this.$(".j-egift_card_radio-value"),this.$amountTopLabel=this.$(".j-egift_max_amount_message"),this.$amountBottomLabel=$(".j-egift_max_amount_sub_label"),this.$remainChars=this.$(".j-egift_form__field_remain_chars"),this.$message=this.$("#greetingMessage"),this.$inputs=this.$("input:not([type=radio]):not([type=checkbox]), textarea, select")},fillTimeSlots:function(e,t){var i="",n=!1;t.length||(n=!0),t.forEach((function(e){i+='<option value="'.concat(e.value,'">').concat(e.title,"</option>")})),this.$deliveryTime.prop("disabled",n).html(i)}});t.default=O}}]);