(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{"T+Th":function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return a}));var o=function(e,t,n){if(t>n){var o=[n,t];t=o[0],n=o[1]}return e>=t&&e<=n},s={1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat",7:"Sun"},i={Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6,Sun:7},a=function(e){return e||(e=new Date),e instanceof Date&&(e=e.getDay()),0===e&&(e+=7),e}},ToJy:function(e,t,n){"use strict";var o=n("I+eb"),s=n("HAuM"),i=n("ewvW"),a=n("0Dky"),r=n("pkCn"),c=[],l=c.sort,d=a((function(){c.sort(void 0)})),u=a((function(){c.sort(null)})),g=r("sort");o({target:"Array",proto:!0,forced:d||!u||!g},{sort:function(e){return void 0===e?l.call(i(this)):l.call(i(this),s(e))}})},Wbxw:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return u}));var o=Backbone.View.extend({initialize:function(){this.currentDate=new Date,setInterval(this.checkDate.bind(this),6e4),this.toggleBold(this.currentDate.getDay())},checkDate:function(){var e=new Date;e.getDay()!==this.currentDate.getDay()&&this.toggleBold(e.getDay()),this.currentDate=e},toggleBold:function(e){0===e&&(e+=7),this.$("tr.today").removeClass(),this.$("tr:nth-child(".concat(e,")")).addClass("today")}}),s=n("g2sj"),i=n("mH21"),a=s.a.makePrettyDateValue,r=Backbone.View.extend({initialize:function(e){var t=e.schedule;this.cacheElements(),this.prepareModel(t),this.listenTo(this.model,"change",this.render),this.start()},start:function(){var e=this;setInterval((function(){e.calculateRemainingTime()}),500)},prepareModel:function(e){this.schedule=new i.a(e,{parse:!0}),this.model=new Backbone.Model({seconds:-1,minutes:-1,hours:-1,days:-1,open:void 0})},calculateRemainingTime:function(){var e=this.schedule.getNextEvent();if(e){var t=e.getTime()-(new Date).getTime();this.model.set({days:Math.floor(t/864e5),hours:Math.floor(t%864e5/36e5),minutes:Math.floor(t%36e5/6e4),seconds:Math.floor(t%6e4/1e3)}),this.model.set("open",e.get("closing"))}},render:function(){var e=this.model.changed;if(e.hasOwnProperty("days")){var t=e.days>0;this.clock.days.toggle(t),this.clock.daysLabel.toggle(t),this.clock.seconds.toggle(!t),this.clock.secondsLabel.toggle(!t)}for(var n in e)this.clock.hasOwnProperty(n)&&this.updateTimer(n,a(e[n]));e.hasOwnProperty("open")&&this.$(".j-store_closing_countdown_label").html(TPS.messages["redesign.store.details.address."+(e.open?"closes":"opens")])},updateTimer:function(e,t){this.clock[e].html(t)},cacheElements:function(){this.clock={},this.clock.days=this.$(".j-store_closing_countdown_days"),this.clock.daysLabel=this.$(".j-store_closing_countdown_days_label"),this.clock.hours=this.$(".j-store_closing_countdown_hours"),this.clock.minutes=this.$(".j-store_closing_countdown_minutes"),this.clock.seconds=this.$(".j-store_closing_countdown_seconds"),this.clock.secondsLabel=this.$(".j-store_closing_countdown_seconds_label")}}),c=n("uOUT"),l=n("qmvR"),d=n("i8xx");function u(){var e,t=0;!function n(){if("undefined"!=typeof google&&google&&google.maps){clearTimeout(e),e=void 0;var o=$(".j-store_details__map"),s=o.data();if(!o.length||!s)return e=setTimeout(n,200),void console.error("Google map is not yet initialized!");var i={lat:s.lat,lng:s.lng},a=new google.maps.Map(o[0],{zoom:15,center:i}),r="SUPERDRUG"===s.storeType?"/map-pin_pink.png":"/map-pin_black.png",c={url:"".concat("/_ui/redesign/theme-igc/images").concat(r),size:new google.maps.Size(28,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(14,14),scaledSize:new google.maps.Size(28,40)};new google.maps.Marker({position:i,map:a,icon:c}).addListener("click",(function(){return a.setCenter(i)}))}else{if(++t>50)return void $(".j-store_details__map").html('<div class="message_box message_box-error">'.concat(TPS.messages["redesign.store.details.maps.error"],"</div>"));console.error("Google maps hasn't been loaded yet!"),e=setTimeout(n,200)}}(),Object(d.d)(o,{el:".j-store_details_schedule"}),Object(d.d)(r,{el:".j-store_closing_countdown",schedule:TPS.pageData.schedule.weekDayOpeningList});var n=$(".j-directions");n.attr("href",l.c?"http://maps.apple.com/?daddr=":"geo:"+n.attr("href"));var s=$(".j-store_images_carousel");s.length&&(s.parent().addClass("store_details__item-gallery"),new c.a({settings:{selector:".j-store_images_carousel",nav:!0,items:1}}).render())}},mH21:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("rB9j"),n("ToJy");var o=n("g2sj"),s=n("T+Th"),i=o.a.makePrettyDateValue,a=Backbone.Model.extend({defaults:{closing:!1,time:"00:00",day:"Mon",date:new Date},parse:function(e){return e.date?{closing:e.closing,date:e.date,day:s.a[Object(s.d)(e.date.getDay())],time:"".concat(i(e.date.getHours()),":").concat(i(e.date.getMinutes()))}:{}},getTime:function(){return(this.get("date")instanceof Date?this.get("date"):new Date).getTime()}}),r=Backbone.Model.extend({defaults:{closed:!1,day:Object(s.d)((new Date).getDay()),weekDay:s.a[Object(s.d)((new Date).getDay())],opening:new a,closing:new a},parseEvent:function(e,t,n){if(e&&"string"==typeof e.formattedHour){var o=new Date,i=e.formattedHour.split(":");o.setHours(i[0],i[1],0);var r=s.b[t],c=Object(s.d)(),l=o.getDate()+(r<c?7:0)-c+r;return o.setDate(l),new a({date:o,closing:n},{parse:!0})}return null},getFirstEvent:function(){return[new Date,this.get("opening"),this.get("closing")].sort((function(e,t){return e.getTime()-t.getTime()})).find((function(e,t,n){return t>n.findIndex((function(e){return e instanceof Date}))}))},parse:function(e){return{closed:e.closed||e.openingTime&&null===e.openingTime.formattedHour||e.closingTime&&null===e.closingTime.formattedHour,day:s.b[e.weekDay],weekDay:e.weekDay,opening:this.parseEvent(e.openingTime,e.weekDay,!1),closing:this.parseEvent(e.closingTime,e.weekDay,!0)}}}),c=Backbone.Collection.extend({model:r,comparator:"day",idAttribute:"day",isOpenedNow:function(){var e=this.getNextEvent();return Boolean(!this.at(Object(s.d)()-1).get("closed")&&(null==e?void 0:e.get("closing")))},getNextEvent:function(){return this.filter((function(e){return null!==e&&!e.get("closed")})).sort((function(e,t){var n=e.get("day"),o=t.get("day");return n<Object(s.d)()&&(n+=7),o<Object(s.d)()&&(o+=7),n-o})).map((function(e){return e.getFirstEvent()})).filter((function(e){return Boolean(e)}))[0]}})}}]);